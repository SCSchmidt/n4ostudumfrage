---
title: "Evaluation of the NFDI4Objects survey for students and trainees"
author:
  - Sophie C. Schmidt:
      email: sophie.schmidt@dainst.de
      institute: [DAI]
      correspondence: true
  - Christin Keller:
      email: christin.keller@dainst.de
      institute: [DAI]
      correspondence: false
  - Louise Rokohl:
      email: rokohl@rgzm.de
      institute: [RGZM]
      correspondence: false
  - Florian Thiery:
      email: thiery@rgzm.de
      institute: [RGZM]
      correspondence: false
  - Henrike Backhaus:
      email: henrike.backhaus@hs-mainz.de
      institute: [HSM]
      correspondence: false 
institute:
  - DAI: Deutsches Archäologisches Institut
  - RGZM: Römisch-Germanisches Zentralmuseum Mainz
  - HSM: Hochschule Mainz
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
    bookdown::word_document2:
      fig_caption: yes
      reference_docx: "../templates/template.docx" # Insert path for the DOCX file
bibliography: references.bib
csl: "../templates/journal-of-archaeological-science.csl" # Insert path for the bib-style
abstract: |
  Text of abstract
keywords: |
  NFDI, survey, results, research data management
highlights: |
  These are the highlights. 
---

<!-- This is the format for text comments that will be ignored during renderings. Do not put R code in these comments because it will not be ignored. -->

<!-- With the following code you can access and display values from the yml header above. -->

Keywords: `r rmarkdown::metadata$keywords`

Highlights: `r rmarkdown::metadata$highlights`

<!-- The following code chunk defines some general settings how code chunks should behave. -->

```{r setup, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE,
  comment = "#>",
  fig.path = "../figures/",
  dpi = 300
)
```

<!-- The actual document text starts here: -->

# Introduction
This paper gives a quick overview over the results of the NFDI4Objects survey, that was tailored to students and trainees.

We were especially interested in what kind of courses on research data management or related topics have been offered to students and trainees and how they gathered the skills they need for their work.

# data set

```{r data}

d <- read.csv2("../data/raw_data/20201210_results-survey553894.csv", sep = ",", encoding = "UTF-8")

library(tidyr)
library(dplyr)
library(tidyverse)

d <- d %>%
  rename(Archaeologie = studienfach.SQ001.,
        Anthropologie = studienfach.SQ002.,
        Archaeozoologie =  studienfach.SQ003.,
        Archaeobotanik =  studienfach.SQ004.,
        Architektur.Bauforschung =  studienfach.SQ005.,
        Digital.Humanities = studienfach.SQ006.,
        Geschichtswissenschaften = studienfach.SQ007.,
        Grabungstechnik = studienfach.SQ008.,
        Klimaforschung = studienfach.SQ009.,
        Konservierung = studienfach.SQ010.,
        Kunstgeschichte =  studienfach.SQ011.,
        Linguistik.Philologie = studienfach.SQ012.,
        MINT = studienfach.SQ013.,
        Museumswissenschaften = studienfach.SQ014.,
        Musikwissenschaften = studienfach.SQ015.,
        Geochemie = studienfach.SQ016.,
        Geologie = studienfach.SQ017.,
        Geographie = studienfach.SQ018.,
        Restaurierung = studienfach.SQ019.)




d <- d %>%
  rename(Interesse.1 = warumkurs1.SQ001.,
         Pflichtveranstaltung.1 = warumkurs1.SQ002.,
         hilfreich.1 = warumkurs1.SQ003.,
         Arbeitsmarkt.1 = warumkurs1.SQ004.,
         Interesse.2 = warumkurs2.SQ001.,
         Pflichtveranstaltung.2 = warumkurs2.SQ002.,
         hilfreich.2 = warumkurs2.SQ003.,
         Arbeitsmarkt.2 = warumkurs2.SQ004.,
         Interesse.3 = warumkurs3.SQ001.,
         Pflichtveranstaltung.3 = warumkurs3.SQ002.,
         hilfreich.3 = warumkurs3.SQ003.,
         Arbeitsmarkt.3 = warumkurs3.SQ004.)

# remove "" as input and make NA out of it
# dplyr solution fom here: https://stackoverflow.com/questions/24172111/change-the-blank-cells-to-na

library(dplyr)

empty_as_na <- function(x){
    if("factor" %in% class(x)) x <- as.character(x) ## since ifelse wont work with factors
    ifelse(as.character(x)!="", x, NA)
}

## transform all columns
d <- d %>% 
  mutate_each(funs(empty_as_na))


```


```{r farbdef}
n4o_tafarben <- c("#9B163C", "#9506C5", "#4DA1EE", "#36CE97",  "#4CCA33","#FF962E", "#FF6243")

n4o_farben <- c("#072A54", "#9B163C", "#9506C5", "#4DA1EE", "#36CE97",  "#4CCA33","#FF962E", "#FF6243", "#005F8E", "#6A6D71", "#A6AAAC", "#E8EAEB")
```


### subject of studies

```{r, faecher_data}


faecher <-  d %>%
  pivot_longer(c(Archaeologie:studienfach.other.),
             names_to = "fach",
             values_to = "ja",
             values_drop_na = FALSE) %>%
  filter(ja != "Nein" &  ja != "N/A")

faecher$fach <- ifelse(faecher$fach == "studienfach.other.", faecher$ja, faecher$fach)

```

```{r, faecher_all, eval = FALSE}


tab_fach <- as.data.frame(table(faecher$fach))

write.csv2(tab_fach, "../data/derived_data/faecheraufstellung.csv", fileEncoding = "UTF-8")



  ggplot(data = tab_fach)+
  geom_bar(aes(x = reorder(Var1, Freq), y = Freq), stat = "identity")+
  labs(x = "subjects", 
     #  y = "frequency (> 2)", 
       name = "Main subject of respondent")+
    coord_flip()

```

## Bereinigung des Datensatzes

```{r}

# Liste der Fächer, die wir bei uns sehen:

community <- c("Archaeologie", "Digital.Humanities", "Digital Humanities", "Museumswissenschaften", "Anthropologie", "Grabungstechnik", "Architektur.Bauforschung", "Geographie", "Ägyptologie", "Ethnologie", "Restaurierung", "Denkmalpflege", "Archäoinformatik", "wissenschaftliche Ausstellungserarbeitung", "Angewandte Informatik", "Bibliotheks- und Informationwissenschaft",  "Kulturanthropologie", "Klimaforschung", "Numismatik", "Geophysik", "Antike Kulturen Vorderasiens und Ägyptens ", "Antike Kulturen Ägyptens und Vorderasiens ", "Bibliotheksreferendariat", "Prähistorische und Historische Archäologie", "Digitale Denkmaltechnologien (Baufoschung, MINT, Bauingenieurwesen, Heritage,...)", "Altamerikanistik/ Ethnologie", "Altertumswissenschaften", "Ethnologie und Erziehungswissenschaften", "Bibliothekswissenschaft", "Bibliotheksreferendariat mit Master Bibliotheks- und Informationswissenschaft", "Informationswissenschaften", "Informationsmanagement", "Organische Residuenanalysen")


d <- subset(faecher, faecher$fach %in% community)

d$fach[d$fach == "Antike Kulturen Vorderasiens und Ägyptens "] <- "Antike Kulturen Ägyptens und Vorderasiens "

d$fach[d$fach == "Bibliotheksreferendariat mit Master Bibliotheks- und Informationswissenschaft"] <- "Bibliotheks- und Informationswissenschaft"

d$fach[d$fach == "Bibliotheks- und Informationswissenschaft" ] <- "Bibliotheks- und Informationswissenschaft"
d$fach[d$fach == "Bibliotheks- und Informationwissenschaft" ] <- "Bibliotheks- und Informationswissenschaft"
d$fach[d$fach == "Bibliotheksreferendariat" ] <- "Bibliotheks- und Informationswissenschaft"
d$fach[d$fach == "Bibliothekswissenschaft" ] <- "Bibliotheks- und Informationswissenschaft"

d$fach[d$fach == "Informationswissenschaft" ] <- "Bibliotheks- und Informationswissenschaft"
d$fach[d$fach == "Informationswissenschaften" ] <- "Bibliotheks- und Informationswissenschaft"

ethn <- c("Ethnologie", "Kulturanthropologie", "Altamerikanistik/ Ethnologie", "Ethnologie und Erziehungswissenschaften")

d$fach[d$fach %in% ethn] <- "Ethnologie/Kulturanthropologie"

tab_fach <- as.data.frame(table(d$fach))

# to check:
  ggplot(data = tab_fach)+
  geom_bar(aes(x = reorder(Var1, Freq), y = Freq), fill = "#072A54", stat = "identity")+
  labs(x = "subjects", 
     #  y = "frequency (> 2)", 
       name = "Main subject of respondent")+
    coord_flip()+
    theme_minimal()

```


The NFDI4Objects survey garnered a lot of attention. We are happy, that all in all xxx students and trainees answered our quetions. They  come from a much broader scientific background than the NFDI4Objects consortium will focus on. Therefore, for this study, we chose to reduce the respondents to those subjects, which belong to our community. 

So there were `r nrow(d)` respondents who belong to our target community. NFDI4Objects is delighted to garner such a large number of answers from students and trainees and will be able to model the course development and training opportunities according to their needs.

## demographics of respondents

We will first look at the demographics of the NFDI4Objects community answers. 

### age

```{r age}
library(ggplot2)

sum_alter  <- summary(d$alter)

ggplot(data = d)+
  geom_histogram(aes(x = alter), binwidth = 1,  fill = "#072A54")+
  xlab("age")+
  geom_text(aes(x = 65, y = 20, label = paste("n =", nrow(d))))+
  geom_text(aes(x = 65, y = 10, label = paste("NA's = ", sum_alter[7])))+
  theme_minimal()



```

Most of the respondents are aged between `r sum_alter[2]` (first quartile) and `r sum_alter[5]` (third quartile) years old. The youngest person is `r sum_alter[1]` and the oldest `r sum_alter[6]`. Median age is `r sum_alter[3]` and mean age is `r sum_alter[4]`. Though the age is not normal-distributed, we are glad to see a good cross-section through all age-classes that usually are in the training stage.


```{r, eval= FALSE}
shapiro.test(d$alter)
```



### type of training


```{r training}

 artausb <- as.data.frame(table(d$artausbildung))

ggplot(data = artausb, aes(x = reorder(Var1, Freq), y = Freq))+
  geom_col(aes(fill = Var1))+
  scale_fill_manual(breaks = artausb$Var1,
                        values = n4o_tafarben)+
  geom_text(aes(label = artausb$Freq), hjust=-0.01)+
  labs(x = "type of training")+
  guides(fill = FALSE)+
  coord_flip()+
  theme_minimal()
  
```

Looking at in what kind of training situation our respondents are, we can observe most being students at BA and MA level. There are fewer phD-students and even less people taking a Volontariat or an advanced training. 


### type of training and institution

```{r ausbildung}

 ausb_inst <- as.data.frame(table(d$artausbildung, d$institution))

ggplot(data = ausb_inst, aes(x = reorder(Var2, Freq), y = Freq))+
  geom_col(aes(fill = Var1))+
  scale_fill_manual(values = n4o_tafarben)+
  labs(x = "institution of training")+
  guides(fill = FALSE)+
  coord_flip()+
  theme_minimal()

#+
#  geom_text(aes(x = ausb_inst$Var2,
#                y = cumsum(ausb_inst$Freq)),# hjust = 0.5,
#            label = ifelse(ausb_inst$Freq > 0, ausb_inst$Freq, ""))




```

We can see here that most students study at a university, while less than half of that study at a Hochschule (technical uni?). At museums most respodents are in a Volontariat and at the Heritage Management institutions respondents take advanced trainings.

### gender

```{r gender}

gender <- as.data.frame(table(d$geschlecht))

ggplot(data = gender, aes(x = reorder(Var1, -Freq), y = Freq))+
  geom_bar(stat = "identity",  fill = "#072A54")+
    labs(x = "gender", 
       y = "frequency", 
       name = "Gender of respondent")+
    geom_text(aes(label = Freq), vjust = -0.7)+
  theme_minimal()
```

```{r}
gend_art <- as.data.frame(table(d$geschlecht, d$artausbildung))
```

Most respondents are female. This is typical for German students in archaeological subjects. Gender does not relate to kind of studies being undertaken, just in the case of "Volontariat", which is obviously more female (`r gend_art$Freq[gend_art$Var1 == "weiblich" & gend_art$Var2 == "Volontariat"]` of `r sum(gend_art$Freq[gend_art$Var2 == "Volontariat"])` being women.



# Which kind of courses were taken already

```{r fdmkursejanein}
fdm_ja <- d %>%
  subset(fdmkursejanein == "ja") %>%
  nrow()

fdm_nein <- d %>%
  subset(fdmkursejanein == "nein") %>%
  nrow()
fdm_wn <- d %>%
  subset(fdmkursejanein == "weiß ich nicht") %>%
  nrow()
```

Students were asked to say, whether there are courses at their institution which touched on research data management. Of those that answered `r fdm_ja` answered yes, `r fdm_nein` said "no". Most (`r fdm_wn`) were not sure, suggesting there were no courses in their immediate environmenht or they were unsure, what research data management entailed. 

```{r berechnung}
kursja <- d %>%
  filter(Kurswahrgenommenjane == "ja") %>%
  nrow()

kursnein <- d %>%
  filter(Kurswahrgenommenjane == "nein") %>%
  nrow()

ggplot()+
  geom_bar(data = d, aes(x = Kurswahrgenommenjane),  fill = "#072A54")+
  labs(x = "Did you take a course with elements of RDM?")+
  theme_minimal()
```
Next, students were asked, whether they had joined a course on data management. Here we can see that most (`r kursnein`) didn't, but `r kursja` did.

Those who had visited some courses were asked to name the amount of courses they visited at their institution which touched on data management.

```{r nkurse_fdm}
sum_nkurse <- summary(d$nkurse)

ggplot()+
  geom_bar(data = d, aes(x = nkurse),  fill = "#072A54")+
  geom_text(aes(x = 10, y = 20, label = paste("n =", nrow(d)-sum_nkurse[7])))+
  scale_x_continuous(name = "number of courses taken",
                   breaks = c(1:10),
                    labels = as.character(1:10))+
  theme_minimal()
```
Most of the respondents, who said they had already taken a course on data management, named between `r sum_nkurse[2]` (first quartile) and `r sum_nkurse[5]` (third quartile) courses. The median is `r sum_nkurse[3]` and mean is `r sum_nkurse[4]`. The maximal value of `r sum_nkurse[6]` is an outlier.

## Does the amount of courses taken vary with studied subject?

Next we look at how these data change in response to the studied subject.

```{r}
kurs_fach <- as.data.frame(table(d$fach, d$Kurswahrgenommenjane))
```

Whether one has or has not taken a course touching on RDM at the institution they are at, is dependent on the subject studied. Whereas students of DH or library and information studies, trainees in Excavation technique and Geophysicsts almost always already took such course. Students in Archaeology, Architecture and Building Studies and Anthropology more often didnot take courses yet. The number of courses taken also varies>

```{r}
d %>%
  group_by(fach) %>% 
  filter(n()>5)%>%
ggplot(aes(x = fach, y = nkurse))+
  geom_boxplot()+
  geom_jitter(alpha = 0.5)+
  labs(x = "subjects that appear more than 5 times")+
  scale_y_continuous(name = "number of courses taken",
                   breaks = c(1:10),
                    labels = as.character(1:10))+
  coord_flip()
```


# Details on the taken courses

```{r}
# note: don't pivot longer for subject or reason

d_kurs1 <- data.frame(d$fach, d$alter, d$id, d$artausbildung, d$jahrausbildung, d$institution, d$kursfach1, d$bundesland1, d$bundesland1.other., d$kursjahr1, d$kurspflicht1, d$kursquali1.SQ001., d$kursquali1.SQ002.)

d_kurs2 <- data.frame(d$fach, d$alter, d$id, d$artausbildung, d$jahrausbildung, d$institution, d$fach2, d$bundesland2, d$bundesland2.other., d$kursjahr2, d$kurspflicht2, d$kursquali2.SQ001., d$kursquali2.SQ002.)

d_kurs3 <- data.frame(d$fach, d$alter, d$id, d$artausbildung, d$jahrausbildung, d$institution, d$fach3, d$bundesland3, d$bundesland3.other., d$kursjahr3, d$kurspflicht3, d$kursquali3.SQ001., d$kursquali3.SQ002.)

cnames <- c("fach", "alter", "id", "artausbildung", "jahrausbildung", "institution", "kursfach", "bundesland", "bundesland.sonst", "kursjahr", "kurspflicht", "kursquali1", "kursquali2") 


colnames(d_kurs1) <-  cnames 
colnames(d_kurs2) <-  cnames 
colnames(d_kurs3) <-  cnames 

kurse_intern <-  rbind(d_kurs1, d_kurs2, d_kurs3)

```


## looking at Bundesland

```{r inst_kurse_bund }
kurse_intern %>%
  filter(!is.na(bundesland)) %>%
  group_by(bundesland) %>%
  summarize(Count=n()) %>%
ggplot()+
  geom_col(aes(x = reorder(bundesland, Count), y = Count), fill = "#072A54" )+
  geom_text(aes(x = 7, y = 25, label = "Wien und Kairo"))+
  geom_text(aes(x = 1, y = 80, label = paste("n = ", nrow(kurse_intern))))+
  coord_flip()+
  theme_minimal()
```

Looking at in which Land in Germany most respondents did their courses, it is easy to see, that NRW has by far the largest amount of courses, that were taken. NRW is a popolous Land and therefore it is not surpriseing a large number of respondents should study and learn there. It also hosts two universities with courses on digital and computational archaeology integrated into the curriculum (Cologne and Bonn).

Please note, this also is a mirror of who answered the survey and of course one course will have been visited by several students and trainees.

### Development through the years

```{r}

kurs_inst_jahr <- as.data.frame(table(kurse_intern$kursjahr, kurse_intern$bundesland))

bndl_viel <- kurs_inst_jahr %>%
  filter(!is.na(Var2) & Var2 != "")%>%
  group_by(Var2) %>% 
  summarise(Frequency = sum(Freq))%>%
filter(Frequency > 8)
  
kurs_inst_jahr %>%
  filter(Var2 %in% bndl_viel$Var2) %>%
ggplot(aes(x = Var1, col = Var2, y = Freq))+
  geom_point() +
  geom_line(aes(group = Var2))+
  theme_minimal()+
  scale_colour_manual(values = n4o_farben[1:8])+
  labs(x = "Year", 
       y = "Amount", 
       col = "Bundesland \nwith more than 8 courses",
       title = "Number of courses featuring RDM per year and Bundesland")+


  ggsave("../figures/first_draft_jahr_kurs.png", dpi = 300, units = "cm", height = 10)

```

There is a development of the amount of courses taken over the years. Especially large is the rise in course taken in Nordrhein-Westphalia, but also in Baden-Wuerttemberg, Lower Saxony and Berlin there is a rise courses being visited over the years. 


## What kind of topics where taught in already taken courses?

```{r}

#umformung der daten: kursbeschreibung gibt thema, kursfach, in welchem fach das angeboten wurde, bundsland,

d_kurs1 <- d %>% 
  pivot_longer(kursbeschreibung1.3D.:kursbeschreibung1.other., # fasse diese zusammen
               names_to = "kurs1", # in dieser neuen spalte 
               names_prefix = "kursbeschreibung1.", #lösch diesen prefix
               values_to = "kurs1ja", # ja oder nein in diese spalte
               values_drop_na = TRUE)%>% # lösch alle NA
  filter(kurs1ja != "Nein" & kurs1ja != "N/A" & kurs1ja != "")

#%>% # filter auf die die "ja" haben
#  
```

```{r}
# umformung daten kurs zwei

d_kurs2 <- d %>% 
  pivot_longer(kursbeschreibung2.3D.:kursbeschreibung2.other., # fasse diese zusammen
               names_to = "kurs2", # in dieser neuen spalte 
               names_prefix = "kursbeschreibung2.", #lösch diesen prefix
               values_to = "kurs2ja", # ja oder nein in diese spalte
               values_drop_na = TRUE)%>% # lösch alle NA
  filter(kurs2ja != "Nein" & kurs2ja != "N/A" & kurs2ja != "")

#%>% # filter auf die die "ja" haben


```

```{r}
d_kurs3 <- d %>% 
  pivot_longer(kursbeschreibung3.3D.:kursbeschreibung3.other., # fasse diese zusammen
               names_to = "kurs3", # in dieser neuen spalte 
               names_prefix = "kursbeschreibung3.", #lösch diesen prefix
               values_to = "kurs3ja", # ja oder nein in diese spalte
               values_drop_na = TRUE)%>% # lösch alle NA
  filter(kurs3ja != "Nein" & kurs3ja != "N/A" & kurs3ja != "")

#%>% # filter auf die die "ja" haben

```

```{r}
# in langes Format umwandeln der kurs 1-3 nach FÄCHERN OHNE Grund!

d_kurs1 <- d_kurs1 %>%
  rename(kurs_institution = kurs1,
         kursja = kurs1ja,
         #grund = warum1,
         #grundja = warum1ja,
         kursfach = kursfach1,
         fach.other = kursfach1.other.,
         bundesland = bundesland1,
         bundesland.other = bundesland1.other.,
         kursjahr = kursjahr1,
         kurspflicht = kurspflicht1,
         kursquali1 = kursquali1.SQ001.,
         kurs_umsetzen = kursquali1.SQ002.)

d_kurs2 <- d_kurs2 %>%
  rename(kurs_institution = kurs2,
         kursja = kurs2ja,
        # grund = warum2,
        # grundja = warum2ja,
         kursfach = fach2,
         fach.other = fach2.other.,
         bundesland = bundesland2,
         bundesland.other = bundesland2.other.,
         kursjahr = kursjahr2,
         kurspflicht = kurspflicht2,
         kursquali1 = kursquali2.SQ001.,
         kurs_umsetzen = kursquali2.SQ002.)

d_kurs3 <- d_kurs3 %>%
  rename(kurs_institution = kurs3,
         kursja = kurs3ja,
        # grund = warum3,
        # grundja = warum3ja,
         kursfach = fach3,
         fach.other = fach3.other.,
         bundesland = bundesland3,
         bundesland.other = bundesland3.other.,
         kursjahr = kursjahr3,
         kurspflicht = kurspflicht3,
         kursquali1 = kursquali3.SQ001.,
         kurs_umsetzen = kursquali3.SQ002.)

common_cols <- intersect(colnames(d_kurs1), colnames(d_kurs2))
common_cols2 <- intersect(colnames(d_kurs2), colnames(d_kurs3))

common_cols <- intersect(common_cols, common_cols2)

d_kurs_inst <- rbind(
  subset(d_kurs1, select = common_cols), 
  subset(d_kurs2, select = common_cols),
  subset(d_kurs3, select = common_cols) )

d_kurs_inst$kurs_institution <- d_kurs_inst$kurs_institution %>%
  recode( "3D." = "3D-modelling / 3D-scans / 3D-photogrammetrie",
          "arch." = "Archiving",
          "auszsprache." = "Markup language",
          "bildbearb." = "Image manipulation",
          "cad." = "CAD",
          "datenb." = "Data bases",
          "datenkur." = "Data curation",
          "datensich." = "Data security",
          "datenman." = "Data management",
          "diged." = "Digital editions",
          "digdatenausw." = "Digital data analysis",
          "digdok." = "Digital documentation",
          "digmetheor." = "Digital method and theory",
          "digressour." = "Digitale ressources (e.g. ZENON, Arachne, ...)", 
          "digverm." = "Digital survey",
          "photogramm." = "Photogrammetrie",
          "programmierung." = "Scripting languages and programming (R, Python, CSS)",
          "tools." = "Software and tools",
          "spatanal." = "Spatial analysis",
          "stat." = "Statistics",
          "textanal." = "Text analysis",
          "onlineress." = "Online ressources",
          "metad." = "Metadata", 
          "wbtechn." = "Web technologies",
          "gis." = "GIS / Web GIS",
          "geophys." = "Geophysics",
          "urheber." = "Copy right",
          "other." = "other")

# Original:
    # 3D-Modellierung / 3D-Scans / 3D-Photogrammetrie
    #Archivierung
    #Auszeichnungssprachen
    #Bildbearbeitung
    #CAD
    #Datenkuratierung
    #Datenbanken
    #Datensicherheit
    #Datenmanagement
    #Digitales Editieren
    #Digitale Datenauswertung
    #Digitale Dokumentation
    #Digitale Methoden & Theorien
    #Digitale Ressourcen (z. B. ZENON, Arachne, o.ä.)
    #Digitale Vermessung
    #Photogrammetrie
    #Programmiersprachen (R, Python, CSS, …) und Programmierung
    #Software und Tools
    #Spatial Analysis
    #Statistik
    #Textanalyse
    #Online-Ressourcen
    #Metadaten
    #Webtechnologien
    #GIS / Web-Kartierung
    #Geophysik
    #Urheber*innenrecht
    #Sonstiges: 

# recode Fächerauswahl

d_kurs_inst$kursfach <- d_kurs_inst$kursfach %>%
  recode("Archäologie" = "Archaeology",
         "Archäobiowissenschaften (-zoologie, -botanik, Dendrochronologie, physische Anthropologie u.ä.)" = "Archaeological Sciences",
         "Archäoinformatik" = "Digital and Computational Archaeology",
         "Architektur / Bauforschung" = "Architecture / Building research", 
         "Geochemie" = "Geochemistry",
         "Geodäsie / Vermessung" = "Geodesy / Surveying",
         "Geographie" = "Geography",
         "Geologie (u.a. Mineralogie, Petrologie, Paläontologie)" = "Geology", 
         "Geschichtswissenschaften" = "History",
         "Grabungstechnik" = "Excavation Techniques",
         "Klimaforschung" = "Climate Research", 
         "Konservierung / Restaurierung" = "Conversation / Restauration", 
         "Kulturanthropologie / Ethnologie" = "Cultural Anthropology", 
         "Kunstgeschichte" = "Art History", 
         "MINT: aus dem Bereich d. Mathematik, Informatik, Naturwissenschaft oder Technik" = "STEM",
         "Museumswissenschaften" = "Museum Studies", 
         "Sonstiges" = "Other") 



```

Respondents were asked to give the details of up to three courses they already took. 

### Which kind of topic was offered in which subject?

```{r}

as.data.frame(table(d_kurs_inst$kursfach, d_kurs_inst$kurs_institution)) %>%
  ggplot()+
  geom_col(aes(x = reorder(Var2, Freq), y = Freq, fill = Var1))+
  scale_fill_manual(values = c(n4o_farben, "#FFFFBB", "#A6AACC"),
                    name = "Programme course was offered in")+
  coord_flip()+
  theme_minimal()
```

As one can see, course with the topics databases, data manamgent and GIS were mentioned most often. The courses were often offered within an archaeology, digital and computational archaeology ("Archäoinformatik") or a digital humanities course. The Excavation technique, Geography and Museums studies programmes offer a significant number of topics as well.   

### Study subject and course offered in

```{r}
try <- kurse_intern  %>% 
  filter(!is.na(fach)) %>% 
  filter(!is.na(kursfach)) %>%
  count(fach, kursfach) %>%
  group_by(fach) 

ggplot(data = try, aes(x=kursfach, y=fach, fill=as.factor(n))) + 
  geom_tile()+
  labs(x = "Subject the course was offered in", y = "Main study subject")+
  theme_minimal()+
  scale_fill_manual(values = c(blues9[2:9], n4o_farben[1:2]),
                    name = "number of courses")+
    theme(axis.text.x = element_text(angle=45))

```

Do students choose courses from different programmes to learn digital skills and research data management? In this graph, the number of course students from the main study subject chose from another subject is shown. Obvious are the high number of archaeology students choosing courses in archaeology, but also in a number of different areas, such as Digital and Computational Archaeoloy, Digital Humanities and Grabungstechnik. In most cases though, only few courses from other subjects where chosen. Nonetheless, a certain interdisciplinarity can be observed.

### Reasons to choose courses:

When asked why the students took the course, the answer may dependent on the topic:

```{r inst_kurse_grund}

# alle gründe in einer Spalte sammeln
 d_kurs_inst <- d_kurs_inst %>% 
  pivot_longer(Interesse.1:warumkurs1.other.,
               names_to = "warum1",
               values_to = "warum1ja",
               values_drop_na = TRUE)%>%
  filter(warum1ja == "Ja")%>%
  pivot_longer(Interesse.2:warumkurs2.other.,
               names_to = "warum2",
               values_to = "warum2ja",
               values_drop_na = TRUE)%>%
  filter(warum2ja == "Ja")%>%
      pivot_longer(Interesse.3:warumkurs3.other.,
               names_to = "warum3",
               values_to = "warum3ja",
               values_drop_na = TRUE)%>%
  filter(warum3ja == "Ja")%>%
  mutate(grund = coalesce(warum1, warum2, warum3))

d_kurs_inst$grund <- gsub('[0-9]+', '', d_kurs_inst$grund)    

as.data.frame(table(d_kurs_inst$grund, d_kurs_inst$kurs_institution)) %>%
  ggplot()+
  geom_col(aes(x = reorder(Var2, Freq), y = Freq, fill = Var1))+
  labs(x = "Several mentions possible", 
       y = "Topics of classes")+
  scale_fill_manual(labels = c("Improves chances for job hunt",
                               "Helpful for my own work",
                               "Interest",
                               "Mandatory course"),
                      name = "Reasons for choosing course",
                    values = n4o_farben[c(1,2,4,10)])+
  coord_flip()+
  theme_minimal()
```

Interestingly enough, the main reason to take a GIS course never seems to have been it being a mandatory class.
... was kann man noch auswerten?


or on the subject students study`

```{r}
d_g <- d %>%
 pivot_longer(Interesse.1:warumkurs1.other.,
               names_to = "warum1",
               values_to = "warum1ja",
               values_drop_na = TRUE)%>%
  filter(warum1ja == "Ja")%>%
  pivot_longer(Interesse.2:warumkurs2.other.,
               names_to = "warum2",
               values_to = "warum2ja",
               values_drop_na = TRUE)%>%
  filter(warum2ja == "Ja")%>%
      pivot_longer(Interesse.3:warumkurs3.other.,
               names_to = "warum3",
               values_to = "warum3ja",
               values_drop_na = TRUE)%>%
  filter(warum3ja == "Ja")%>%
  mutate(grund = coalesce(warum1, warum2, warum3))

d_g$grund <- gsub('[0-9]+', '', d_g$grund)    

```

```{r}


as.data.frame(table(d_g$grund, d_g$fach)) %>%
  ggplot()+
  geom_col(aes(x = reorder(Var2, Freq), y = Freq, fill = Var1))+
  labs(y = "Several mentions possible", 
       x = "Subject studied")+
  scale_fill_manual(labels = c("Improves chances for job hunt",
                               "Helpful for my own work",
                               "Interest",
                               "Mandatory course"),
                      name = "Reasons for choosing course",
                    values = n4o_farben[c(1,2,4,10)])+
  coord_flip()+
  theme_minimal()


```

-- kann m.E. raus.

## How did students evaluate course quality?


```{r}
kurse_intern %>%
  pivot_longer(kursquali1:kursquali2,
               names_to = "quali_frage",
               values_to = "kursquali") %>%
  filter(!is.na(kursquali))%>%
ggplot(aes(x = as.factor(kursquali), fill = quali_frage))+
geom_bar(na.rm = TRUE, position = position_dodge())+
  labs(title = "Quality assessment of the courses",
       x= "blue: 1 - very bad to 10 - very good \n grey: 1 - I didn't learn anything to 10 - I am confident in the learned skills")+
  scale_fill_manual(values = n4o_farben[c(1,10)],
                    labels = c("Quality of course", "Learn effect"),
                    name = "Assessment")+
  geom_text(aes(x = 1, y = 50, label = paste("n = ", (nrow(kurse_intern)/2 ))))+
  theme_minimal()

```

How much students and trainees perceive to have learned correlates obviously with their assessment of the quality of the course. All in all, most students and trainees evaluated most courses to be good and very good. 

Nonetheless, there is a rather growing variance in the learning effect the better the course was perceived to be. Even though the course had been of very good quality, students and trainees don't feel comfortable applying the techniques. The best learning effect students had whith courses they say were "good", 8 of 10 points, after this point the learning effect drops. Here it may be, that students value courses with a higher content density as being "better", but this large amount of input made them feel more insecure in their own skills or they didn't have enough time to practice.

### Reasons for not attending RDM courses

```{r}
d %>%
  pivot_longer(keinkurs.SQ001.:keinkurs.SQ004.,
               names_to = "keinkurs_weil",
               values_to = "keinkursja") %>%
  filter(keinkursja == "Ja")%>%
  ggplot()+
  geom_bar(aes(x = keinkurs_weil), fill = n4o_farben[1])+
  scale_x_discrete(labels = c("no time",
                              "time overlap with other courses",
                              "could not be credited",
                              "no interest"))+
  labs(x = "",
       title = "Reasons not to attend RDM courses",
       y = "Count (several mentions possible)" )+
  theme_minimal()
```

There are several reasons, students and trainees did not partake in courses on RDM. Most cited are time constraints. This shows, how RDM is not currently part of regular curricula. Students cannot receive credit points, and as the normal course load of a full-time student is already tailored to a 40h week, it is difficult to take courses on top, especially if meeting deadlines of the so called "Regelstudium" for BAFöG-reliant students. *RANT OFF*   

# Advanced external training opportunities

Students and trainees were asked to share where they gained RDM skills if not at their home institution.

We asked whether they learned on their own
Haben Sie sich selbständig und autodidaktisch zu Themen des Datenmanagements fortgebildet? 


```{r}

library(magrittr)

d$autodidakt <- factor(d$autodidakt, level = c("Ja", "Nein", "N/A"))
ggplot()+
geom_bar( aes(x = d$autodidakt), fill = n4o_farben[1])+
  scale_x_discrete(breaks = c("Ja", "Nein", "N/A"))
```

Next we asked which channels those who did learn on their own, used:

```{r}
d_a <- 
d %>%
  pivot_longer(autodidaktwie.YT.:autodidaktwie.other.,
               values_drop_na = TRUE,
               values_to = "auto_ja",
               names_to = "selfhelp") %>%
  filter(auto_ja != "Nein") %>%
  filter(auto_ja != "N/A")%>%
  mutate(selfhelp = na_if(selfhelp, "autodidaktwie.other." ))%>%
  mutate(selfhelp = coalesce(selfhelp, auto_ja)) %>%
  mutate(selfhelp = recode(selfhelp,
                           "BA Studium in Soziologie" = "vorheriges Studium / Ausbildung",
                           "IT Ausbildung" = "vorheriges Studium / Ausbildung",
                           "Frühere Erfahrung/Ausbildung" = "vorheriges Studium / Ausbildung",
                           "vorheriges Studium" = "vorheriges Studium / Ausbildung",
                           "über die Arbeit" = "Arbeitserfahrung",
                           "über das Deutsche Archäologische Institut" = "Arbeitserfahrung",
                           "Fortbildungen durch meinen Chef im Rahmen meines Jobs an der Uni für ein Grabungsprojekt" = "Arbeitserfahrung",
                           "Arbeit (HiWi)" = "Arbeitserfahrung",
                           "im früheren Arbeitsbild " = "Arbeitserfahrung",
                           "Tagung" = "Tagungen",
                           "CAA Deutschland Tagung" = "Tagungen",
                           "Kolloquien mit anderen Studierenden" = "Tagungen",
                           "Suche nach statistischen Methodiken im Internet" = "autodidaktwie.online.",
                           "Skripten von Lehrveranstaltungen" = "autodidaktwie.LB.",
                           "praktisch durch Praxisanteil im Bibliotheksreferendariat an einer Universitätsbibliothek" = "Arbeitserfahrung",
                           "Learning by doing" = "unspezifisch",
                           "Selbst aktiv Kurse gesucht und besucht." = "unspezifisch",
                           "Museum Digital" = "autodidaktwie.online."))
d_a %>%
  filter(selfhelp != "vorheriges Studium / Ausbildung") %>%
  filter(selfhelp != "unspezifisch") %>%
  group_by(selfhelp) %>%
  summarise(n = n())%>% 
  ggplot()+
  geom_col(aes(x = reorder(selfhelp, n), y =  n, fill = selfhelp),
            show.legend=FALSE)+
  scale_x_discrete(breaks = c("autodidaktwie.bek." , "autodidaktwie.LB.", "autodidaktwie.online.", "autodidaktwie.YT.", "Arbeitserfahrung", "Tagungen"),
                 labels = c("acquaintances", "books & learning materials", "online manuals and materials", "YouTube (or similar)", "at work", "at conferences"))+
  scale_fill_manual(values = n4o_farben[1:6])+
  labs(x = "", 
       y = "count (several mentions possible)",
       title = "Ways respondents learn about RDM on their own")+
  geom_text(aes(x = 1, y = 60, label = paste("n =", length(d$autodidakt[d$autodidakt == "Ja"]))))+
  coord_flip()
  
```


Getting help from acquaintances is the most important way for people to learn about Research Data Management outside of structured courses. Online material and Youtube and similar video platforms are an important source for learning about RDM, only slightly more often named than books and other manuals. Some report they learned a lot at work or at conferences. 

### External courses

Do students and trainees take courses outside their home institution and if yes, how many did they take?

```{r extkurs}
d %>%
  filter(extkurse != "N/A") %>%
  ggplot()+
  geom_bar(aes(x = extkurse), fill = n4o_farben[1])+
    geom_text(aes(x = 0.5, y = 230, label = paste("N/A =", length(d$extkurse[d$extkurse == "N/A"]))))+
  theme_minimal()
```

Only very few students and trainees took part in courses outside their home institution.

```{r n_nextkurs}

d %>%
  filter(nextkurse > 0) %>%
  ggplot()+
  geom_bar(aes(x = nextkurse), fill = n4o_farben[1])+
  geom_text(aes(x = 4, y = 8, label = paste("n = ", nrow(d %>% filter(nextkurse > 0)))))+
  labs(x = "Number of courses taken outside of own institution")+
  scale_y_continuous(breaks = c(2,4,6,8))+
  theme_minimal()
```

## Which topics are featured in the external courses

```{r jahrext}
d_ext_j <-
d %>%
  pivot_longer(c(jahrextkurs1, jahrextkurs2, jahrextkurs3),
               values_to = "jahrext",
               names_to = "kursnummer",
               values_drop_na = TRUE)
d_ext_j %>%
  ggplot()+
  geom_histogram(aes(x = jahrext), fill = n4o_farben[1])+
  theme_minimal()
```

Since 2015 the number of course students and trainees join has grown significantly. We see a trend here, that may correlate with the rising digitalisation of research ... see andere auswertung.


## topics people searched further training in
```{r}

d_ext <- d %>% 
  pivot_longer(c(extkursthem1.3D.:extkursthem1.other., extkursthem2.3D.:extkursthem2.other., extkursthem3.3D.:extkursthem3.other.), # fasse diese zusammen
               names_to = "extkurs_them", # in dieser neuen spalte 
               names_prefix = "extkursthem", #lösch diesen prefix
               values_to = "extkursthem_ja", # ja oder nein in diese spalte
               values_drop_na = TRUE)%>% # lösch alle NA
  filter(extkursthem_ja != "Nein" & extkursthem_ja != "N/A" & extkursthem_ja != "")%>%
   mutate(extkurs_them = na_if(extkurs_them, "1.other.")) %>%
   mutate(extkurs_them = na_if(extkurs_them, "2.other.")) %>%
   mutate(extkurs_them = na_if(extkurs_them, "3.other.")) %>%
   mutate(extkurs_them = coalesce(extkurs_them, extkursthem_ja))
 
d_ext$extkurs_them <- gsub('[0-9]+.', '', d_ext$extkurs_them)   

d_ext$extkurs_them <- d_ext$extkurs_them %>%
  recode( "3D." = "3D-modelling / 3D-scans / 3D-photogrammetrie",
          "arch." = "Archiving",
          "auszsprache." = "Markup language",
          "bildbearb." = "Image manipulation",
          "cad." = "CAD",
          "datenb." = "Data bases",
          "datenkur." = "Data curation",
          "datensich." = "Data security",
          "datenman." = "Data management",
          "diged." = "Digital editions",
          "digdatenausw." = "Digital data analysis",
          "digdok." = "Digital documentation",
          "digmetheor." = "Digital method and theory",
          "digressour." = "Digitale ressources (e.g. ZENON, Arachne, ...)", 
          "digverm." = "Digital survey",
          "photogramm." = "Photogrammetrie",
          "programmierung." = "Scripting languages and programming (R, Python, CSS)",
          "tools." = "Software and tools",
          "spatanal." = "Spatial analysis",
          "stat." = "Statistics",
          "textanal." = "Text analysis",
          "onlineress." = "Online ressources",
          "metad." = "Metadata", 
          "wbtechn." = "Web technologies",
          "gis." = "GIS / Web GIS",
          "geophys." = "Geophysics",
          "urheber." = "Copy right",
          "Langzeitarchivierung" = "Long time archiving",
          "Digitale Lehre" = "Digital Education")

d_ext %>% 
  group_by(extkurs_them)%>%
  summarize(n = n())%>%
  ggplot()+
  geom_col(aes(x = reorder(extkurs_them, n), y = n), fill = n4o_farben[1])+
  coord_flip()+
  labs(x = "",
       y = "count (several topics per course)")+
  geom_text(aes(x = 1, y = 12, label = paste("n =  ", length(!is.na(d_ext_j$jahrext)),"courses")))+
  theme_minimal()

```

There are several topics people looking for advanced training in Research Data Management found interesting. Data managemtn, software,tools and databases are the most commen topics.

### Where

Are there certain hubs, where people look for training? We are aware that these answers need to be taken cautiously: The number of people taking further training is too small to be fully representative. 



```{r}
d  %>% 
  pivot_longer(c(extkurswo, extkurswo2, extkurswo3),
               values_to = "extwo",
               names_to = "extnr",
               values_drop_na = TRUE)  %>%
  mutate(extwo = recode(extwo,
                         "Bochum/Deutschland"  = "Bochum",
                        "Berlin / Deutschland" = "Berlin",
                        "Tübingen, Deutschland" = "Tübingen",
                        "München/Bayern" = "München (Munich)",
                        "Berlin/Berlin" = "Berlin",
                        "Berlin/Deutschland" = "Berlin",
                        "Paris / Frankreich" = "Paris/France",
                        "Potsdam/Deutschland" = "Potsdam",
                         "Köln/Deutschland" = "Köln (Cologne)",
                         "Köln / Deutschland" = "Köln (Cologne)",
                        "Aarhus / Dänemark" = "Aarhus/Denmark",
                        "München Bayern" = "München (Munich)",
                        "Hannover / Niedersachsen" = "Hannover"))%>%
  pivot_longer(c(artextkurs1, artextkurs1.other., artextkurs2, artextkurs2.other., artextkurs3, artextkurs3.other.),
               names_to = "artextnr",
               values_to = "art_ext",
               values_drop_na = TRUE)%>%
  filter(art_ext != "Sonstiges")%>%
  mutate(art_ext = recode(art_ext,
                          "CAA Tagung" = "Workshop während einer Konferenz",
                          "Konferenz " = "Workshop während einer Konferenz",
                          "Frühere Arbeitsstelle" = "Fortbildung vom Arbeitgebenden",
                          "im Rahmen des Bibliotheksreferendariats" = "Fortbildung vom Arbeitgebenden",
                          "Online Kurs einer Uni in den USA" = "Webinar"))%>%
  group_by(extwo, art_ext)%>%
  summarise(count = n())%>%
  ggplot()+
  geom_col(aes(x = reorder(extwo, count), y = count, fill = art_ext))+
  scale_y_continuous(breaks = c(2,4,6,8))+
  scale_fill_manual(values = n4o_farben[c(1:5,7)],
                    name = "Kind of training",
                      labels = c("organised by students", "organised by employer", "at another university", "summer- or winter school", "webinar", "workshop during a confernce"))+
  labs (x = "")+
  coord_flip()+
  theme_minimal()

```


Nonetheless we notice that in Berlin a number of training possiblities seem to exist. Students and trainees take part in interantional summer and winterschools. Training possibilities at conferences are visited regularly (CAA Germany chapter meetings where mentioned several times). 


### Learning on the job

While the other questions where reserved for structured learning in course, one questioned aimed at whether students and trainees received RDM knowledge "on the job".

```{r}

d%>%
  filter(jobfortbildung != "N/A") %>%
ggplot()+
  geom_bar(aes(x = jobfortbildung), fill = n4o_farben[1])+
  scale_x_discrete(labels = c("Yes", "No"))+
  theme_minimal()+
  labs(x = "I learned RDM skills on the job")
```


# How do students and trainees deal with data and software

```{r}
d %>%
  mutate(softwarehaeufig.other. = gsub(";", ",", softwarehaeufig.other.))%>%
  separate(softwarehaeufig.other., c("A", "B","C","D"), sep = ",")%>%
  pivot_longer(c(softwarehaeufig.A1.:softwarehaeufig.A13.,A:D),
               names_to = "software",
               values_to = "software_ja",
               values_drop_na = TRUE) %>%
  filter(software_ja != "Nein" & software_ja != "N/A") %>%
  mutate(software = na_if(software, "A")) %>%
  mutate(software = na_if(software, "B")) %>%
  mutate(software = na_if(software, "C")) %>%
  mutate(software = na_if(software, "D")) %>%
  mutate(software = coalesce(software, software_ja))%>%
  mutate(software = recode(software,
                         "softwarehaeufig.A1."  = "Excel",
                         "softwarehaeufig.A2."  = "QGIS",
                         "softwarehaeufig.A3."  ="Microsoft Access",
                         "softwarehaeufig.A4."  = "SPSS",
                         "softwarehaeufig.A5." = "Word",
                         "softwarehaeufig.A6." = "LibreOffice",
                         "softwarehaeufig.A7." = "LibreCalc",
                         "softwarehaeufig.A8."  = "ArcGIS",
                         "softwarehaeufig.A9."  = "AdobeAcrobat Reader",
                         "softwarehaeufig.A10."  = "MeshLab",
                         "softwarehaeufig.A11." = "WinBASP",
                         "softwarehaeufig.A12." = "Adobe InDesign",
                         "softwarehaeufig.A13." = "Adobe Photoshop",
                         "Rstudio" = "R, Rstudio",
                         "RStudio" = "R, Rstudio",
                         "R" = "R, Rstudio",
                         " R" = "R, Rstudio",
                         "Latex" = "LaTeX",
                         " LaTex" = "LaTeX",
                         " Inkscape" = "Inkscape",
                          "Power Point"= "Powerpoint",
                          " Power Point"= "Powerpoint",
                         " powerpoint" = "Powerpoint",
                         " PowerPoint" = "Powerpoint",
                         " Power Point" = "Powerpoint",
                         "autocad" = "AutoCAD",
                         "Autocad" = "AutoCAD",
                         "AUTOCad" = "AutoCAD",
                         "archicad" = "ArchiCAD",
                         "openoffice" = "OpenOffice",
                         "Matlab" = "MatLab",
                         "Gimp" = "GIMP"))%>%
  group_by(software)%>%
  summarise(Count = n())%>%
  filter(Count > 2)%>%
ggplot()+
  geom_col(aes(x = reorder(software, Count), y = Count))+
  coord_flip()
```

7. Umgang mit Daten?
  7a Such- und Findeverhalten, 
  7b Welche back-up Strategien werden benutzt


10. Warum werden Kurse nicht besucht?

11. Hängen Besuch von Kursen und Fortbildungen, Richtlinien zu FDM sowie Wissen um NFDI und Metadaten von ITAffinität ab? 

12. In welchem Bereich bestehen Wünsche zu Fortbildung?

\newpage

# References 

<!-- The following line ensures the references appear here for the MS Word or HTML output files, rather than right at the end of the document (this will not work for PDF files):  -->

<div id="refs"></div>

\newpage

### Colophon

This report was generated on `r Sys.time()` using the following computational environment and dependencies: 

```{r colophon, cache = FALSE}
# which R packages and versions?
if ("devtools" %in% installed.packages()) devtools::session_info()
```

The current Git commit details are:

```{r}
# what commit is this file at? 
if ("git2r" %in% installed.packages() & git2r::in_repository(path = ".")) git2r::repository(here::here())  
```
